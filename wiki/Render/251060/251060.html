<div class="wikidoc"><h1>Gravatar Tutorial</h1>This tutorial illustrates the usage of the Gravatar HtmlHelper that can be found in the DigitallyCreated.Utilities.Mvc assembly. The Gravatar extension method can be found in the GravatarHtmlHelpers class. The tutorial expects that you know C# and ASP.NET MVC.<br /><br /><a href="http://en.gravatar.com/">Gravatar</a> is a really nice free web service that allows a user to associate his or her email address with an avatar picture. Then, when that user visits a website that uses gravatars and posts comments etc, the website can display the avatar that Gravatar has stored as associated with his or her email address. The Gravatar HtmlHelper makes this really easy to do in ASP.NET MVC.<br /><br />Effectively all the HtmlHelper does is output a simply img tag with the URL set to the Gravatar URL. You should read <a href="http://en.gravatar.com/site/implement/url">Gravatar&#39;s short page</a> on the URL before continuing so you understand the different Gravatar options.<br /><br />For the following example, assume the Model for the View is strongly typed to this class:<br /><br /><div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">public</span> <span style="color:Blue;">class</span> User
{
    <span style="color:Blue;">public</span> <span style="color:Blue;">string</span> DisplayName { <span style="color:Blue;">get</span>; <span style="color:Blue;">set</span>; }
    <span style="color:Blue;">public</span> <span style="color:Blue;">string</span> Email { <span style="color:Blue;">get</span>; <span style="color:Blue;">set</span>; }
}
</pre></div><br />So, in the view we will use the Gravatar HtmlHelper to show the user&#39;s Gravatar (the user being the User object that is the view&#39;s model):<br /><br /><div style="color:Black;background-color:White;"><pre>
<span style="background-color:Yellow;">&lt;%</span> <span style="color:Blue;">string</span> gravatarTitle = String.Format(<span style="color:#A31515;">&quot;{0}&#39;s Gravatar&quot;</span>, Model.DisplayName); <span style="background-color:Yellow;">%&gt;</span>
<span style="background-color:Yellow;">&lt;%=</span> Html.Gravatar(Model.Email, GravatarDefaults.Indenticon, 80, GravatarRating.PG, <span style="color:Blue;">new</span> Dictionary&lt;<span style="color:Blue;">string</span>, <span style="color:Blue;">object</span>&gt; { { <span style="color:#A31515;">&quot;alt&quot;</span>, gravatarTitle }, {<span style="color:#A31515;">&quot;title&quot;</span>, gravatarTitle} })<span style="background-color:Yellow;">%&gt;</span>
</pre></div><br />The first parameter passed to the HtmlHelper is the user&#39;s email address. The second is what Gravatar default you want to use if the that email doesn&#39;t have a Gravatar associated with it. The third is the size that you&#39;d like the image to be (height and width; the image is square). The fourth is the rating to use (this uses PG, so we don&#39;t get porno avatars!). The fifth is a dictionary of extra attributes we want to set on the img tag. In this case we&#39;re setting the alt and title attributes.<br />There are shorter overloads that you can use if you don&#39;t need all those different options. See the code&#39;s XMLdoc.<br /><br />The above example will emit the following HTML (obviously the alt, title and src would be different depending on the user):<br /><br /><div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">&lt;</span><span style="color:#A31515;">img</span> <span style="color:Red;">width</span><span style="color:Blue;">=</span><span style="color:Blue;">&quot;80&quot;</span> <span style="color:Red;">height</span><span style="color:Blue;">=</span><span style="color:Blue;">&quot;80&quot;</span> <span style="color:Red;">title</span><span style="color:Blue;">=</span><span style="color:Blue;">&quot;Splinkifater&#39;s Gravatar&quot;</span> <span style="color:Red;">alt</span><span style="color:Blue;">=</span><span style="color:Blue;">&quot;Splinkifater&#39;s Gravatar&quot;</span>
     <span style="color:Red;">src</span><span style="color:Blue;">=</span><span style="color:Blue;">&quot;http://www.gravatar.com/avatar/00000000000000000000000000000000?d=identicon&amp;amp;s=80&amp;amp;r=pg&quot;</span> <span style="color:Blue;">/&gt;</span>
</pre></div></div><div class="ClearBoth"></div>